# 斗地主手机版日常维护操作手册


**登录`192.168.7.230`主机**
## 预发布
### 版本发布
- 增量发布
 - 暂无


- 全量发布
 - 执行 `/auto-publish/ddz/mobile/ksyun/yfb/ddz-mobile-yfb-all.sh`
 - 登录预发布服务器执行 `cd /svndata/svr/ && ./stop_all.sh && ./start_all.sh`


### 活动发布
- 版本发布
 - 依次执行
```shell
/auto-publish/ddz/act-mobile/yfb/unzip.sh
/auto-publish/ddz/act-mobile/yfb/rsync_online_test.sh
```
 - 登录预发布服务器执行 `cd /svndata/svr/?/sbin/ && ./restart.sh`


## 生产
### 版本发布
- 增量发布
 - 执行 `/auto-publish/ddz/mobile/ksyun/sc/ddz-mobile-sc-hot.sh`
 - 登录相关服务器依次执行 `cd /svndata/svr/ && ./ServerAdm.sh [reload|restart|start|stop|status] [svrname]`


- 全量发布
 - 执行 `/auto-publish/ddz/mobile/ksyun/sc/ddz-mobile-sc-all.sh`
 - 登录相关服务器依次执行 `cd /svndata/svr/ && ./ServerAdm.sh [reload|restart|start|stop|status] [svrname]`


- 自动增量发布
_web页面暂未准备好,可使用crontab执行定时自动发布_
*需要在SvrList.txt文件里配置需要重启和重载的服务名称*
    > `/auto-publish/ddz/mobile/ksyun/sc/ddz-mobile-sc-auto-hot.sh [版本号]`


### 活动发布
- 更新cdn
 - 执行 `/auto-publish/ddz/act-mobile/cdn/auto.sh`
- 版本发布
 - 执行 `/auto-publish/ddz/act-mobile/sc/auto-push.sh`
 - 登录相关服务器依次执行 `cd /svndata/svr/?/sbin/ && ./restart.sh`


### 小游戏发布
- 版本发布/更新cdn
 - 执行 `/auto-publish/ddz/small-game/auto.sh`

